<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIQUE COACHING CENTRE - একটি নির্ভরযোগ্য শিক্ষা প্রতিষ্ঠান</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    
    <!-- PDF Generation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Custom Styles -->
    <style>
        body {
            font-family: 'Hind Siliguri', 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .gradient-text {
            background: linear-gradient(90deg, #FDB813, #FFAA00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero-bg {
            background-color: #1a202c;
            background-image: radial-gradient(circle at 1px 1px, #374151 1px, transparent 0);
            background-size: 20px 20px;
        }
        .section-glow {
            box-shadow: 0 0 40px rgba(253, 184, 19, 0.1);
        }
        .modal {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .form-input:focus-within {
            border-color: #FDB813;
            box-shadow: 0 0 0 2px rgba(253, 184, 19, 0.5);
        }
        .form-input.invalid {
            border-color: #ef4444; /* red-500 */
        }
        /* Tab Styles */
        .custom-tab {
            padding: 8px 16px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .custom-tab.active {
            border-color: #FDB813;
            color: #FDB813;
        }
        .class-tab {
             background-color: #374151;
             color: white;
             padding: 6px 12px;
             border-radius: 9999px;
             font-size: 0.875rem;
             transition: all 0.3s ease;
        }
        .class-tab.active {
            background-color: #FDB813;
            color: #1a202c;
            font-weight: bold;
        }
        /* Course Slider */
        .course-slider-container {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none;  /* Internet Explorer 10+ */
        }
        .course-slider-container::-webkit-scrollbar { 
            display: none;  /* Safari and Chrome */
        }
        /* Print styles for Receipt */
        @media print {
            body * {
                visibility: hidden;
            }
            #receipt-content, #receipt-content * {
                visibility: visible;
            }
            #receipt-content {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <!-- Header Section -->
    <header class="bg-gray-900/80 backdrop-blur-sm sticky top-0 z-50 shadow-lg shadow-yellow-500/5">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-white">
                UNIQUE <span class="gradient-text">COACHING CENTRE</span>
            </a>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#home" class="hover:text-yellow-400 transition duration-300">হোম</a>
                <a href="#about" class="hover:text-yellow-400 transition duration-300">আমাদের সম্পর্কে</a>
                <a href="javascript:void(0)" data-modal-target="courses-modal" class="modal-trigger hover:text-yellow-400 transition duration-300">কোর্সসমূহ</a>
                <a href="javascript:void(0)" data-modal-target="teachers-modal" class="modal-trigger hover:text-yellow-400 transition duration-300">শিক্ষকবৃন্দ</a>
                <a href="javascript:void(0)" data-modal-target="routine-modal" class="protected-link modal-trigger hover:text-yellow-400 transition duration-300">রুটিন</a>
                <a href="javascript:void(0)" data-modal-target="suggestions-modal" class="protected-link modal-trigger hover:text-yellow-400 transition duration-300">সাজেশন</a>
                <div id="auth-section">
                    <a href="javascript:void(0)" data-modal-target="login-modal" id="login-btn" class="modal-trigger bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 px-4 rounded-lg transition duration-300">লগইন</a>
                </div>
            </div>
            <div class="md:hidden">
                <button id="menu-btn" class="text-white focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-gray-800">
             <a href="#home" class="block py-2 px-4 text-sm hover:bg-gray-700">হোম</a>
            <a href="#about" class="block py-2 px-4 text-sm hover:bg-gray-700">আমাদের সম্পর্কে</a>
            <a href="javascript:void(0)" data-modal-target="courses-modal" class="modal-trigger block py-2 px-4 text-sm hover:bg-gray-700">কোর্সসমূহ</a>
            <a href="javascript:void(0)" data-modal-target="teachers-modal" class="modal-trigger block py-2 px-4 text-sm hover:bg-gray-700">শিক্ষকবৃন্দ</a>
            <a href="javascript:void(0)" data-modal-target="routine-modal" class="protected-link modal-trigger block py-2 px-4 text-sm hover:bg-gray-700">রুটিন</a>
            <a href="javascript:void(0)" data-modal-target="suggestions-modal" class="protected-link modal-trigger block py-2 px-4 text-sm hover:bg-gray-700">সাজেশন</a>
            <a href="#testimonials" class="block py-2 px-4 text-sm hover:bg-gray-700">শিক্ষার্থীদের মতামত</a>
            <a href="#gallery" class="block py-2 px-4 text-sm hover:bg-gray-700">গ্যালারি</a>
            <a href="#faq" class="block py-2 px-4 text-sm hover:bg-gray-700">প্রশ্নোত্তর</a>
            <div id="mobile-auth-section" class="p-4">
                 <a href="javascript:void(0)" data-modal-target="login-modal" id="mobile-login-btn" class="modal-trigger bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 px-4 rounded-lg transition duration-300 w-full block text-center">লগইন</a>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="hero-bg py-20 md:py-32">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4">
                    সেরা ফলাফলের বিশ্বস্ত ঠিকানা <br class="hidden md:block"/> <span class="gradient-text">ইউনিক কোচিং সেন্টার</span>
                </h1>
                <p class="text-lg md:text-xl text-gray-400 max-w-3xl mx-auto mb-8">
                    আমরা শিক্ষার্থীদের স্বপ্ন পূরণে প্রতিশ্রুতিবদ্ধ। অভিজ্ঞ শিক্ষক এবং আধুনিক পাঠদানের মাধ্যমে প্রতিটি শিক্ষার্থীর সেরাটা বের করে আনাই আমাদের লক্ষ্য।
                </p>
                <a href="javascript:void(0)" data-modal-target="admission-modal" class="modal-trigger bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105">
                    ভর্তি চলছে
                </a>
            </div>
        </section>

        <!-- Featured Courses Section -->
        <section id="featured-courses" class="py-20 bg-gray-900">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">আমাদের <span class="gradient-text">জনপ্রিয় কোর্সসমূহ</span></h2>
                    <p class="text-gray-400 mt-2">আপনার পছন্দের কোর্সটি বেছে নিন</p>
                </div>
                <div class="relative">
                    <div id="featured-courses-container" class="course-slider-container flex gap-8 overflow-x-auto snap-x snap-mandatory px-4 py-2">
                        <!-- Featured courses will be populated by JS -->
                    </div>
                    <button id="scroll-left" class="absolute top-1/2 left-0 transform -translate-y-1/2 bg-gray-800/50 hover:bg-yellow-500 text-white hover:text-black rounded-full p-2 transition duration-300 z-10 hidden md:block">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                    </button>
                    <button id="scroll-right" class="absolute top-1/2 right-0 transform -translate-y-1/2 bg-gray-800/50 hover:bg-yellow-500 text-white hover:text-black rounded-full p-2 transition duration-300 z-10 hidden md:block">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about" class="py-20 bg-gray-800/50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">আমাদের <span class="gradient-text">সম্পর্কে</span></h2>
                    <p class="text-gray-400 mt-2">যে কারণে আমরা অন্যদের থেকে আলাদা</p>
                </div>
                <div class="flex flex-col-reverse md:flex-row items-center gap-10">
                    <div class="md:w-1/2">
                        <h3 class="text-2xl font-semibold text-white mb-4">আমাদের লক্ষ্য ও উদ্দেশ্য</h3>
                        <p class="text-gray-400 mb-4">
                            ইউনিক কোচিং সেন্টারের পথচলা শুরু হয়েছিল একদল মেধাবী ও অভিজ্ঞ শিক্ষকের হাত ধরে, যাদের মূল উদ্দেশ্য ছিল শিক্ষার্থীদের জন্য একটি সহজ ও কার্যকর শিক্ষার পরিবেশ তৈরি করা। আমরা শুধুমাত্র পাঠ্যবইয়ের পড়াই সীমাবদ্ধ রাখি না, বরং শিক্ষার্থীদের মেধা ও সৃজনশীলতার বিকাশেও সাহায্য করি।
                        </p>
                        <p class="text-gray-400">
                            আমাদের আধুনিক ক্লাসরুম, নিয়মিত পরীক্ষা এবং অভিভাবকদের সাথে নিবিড় যোগাযোগ প্রতিটি শিক্ষার্থীকে তার লক্ষ্যে পৌঁছাতে সহায়তা করে।
                        </p>
                    </div>
                    <div class="md:w-1/2">
                        <div class="grid grid-cols-2 grid-rows-2 gap-4">
                            <img src="https://img.freepik.com/free-vector/teacher-concept-illustration_114360-1637.jpg?w=740" alt="শিক্ষক পাঠদান করছেন" class="rounded-xl w-full h-full object-cover shadow-lg section-glow col-span-2 row-span-1" onerror="this.onerror=null;this.src='https://placehold.co/600x300/1a202c/FDB813?text=Shikkhok';">
                            <img src="https://img.freepik.com/free-vector/online-certification-concept_23-2148575645.jpg?w=740" alt="অনলাইন শিক্ষা" class="rounded-xl w-full h-full object-cover shadow-lg section-glow" onerror="this.onerror=null;this.src='https://placehold.co/300x200/1a202c/FDB813?text=Online+Shikkha';">
                            <img src="https://img.freepik.com/free-vector/online-learning-concept-illustration_114360-4792.jpg?w=740" alt="শিক্ষার্থীরা পড়ছে" class="rounded-xl w-full h-full object-cover shadow-lg section-glow" onerror="this.onerror=null;this.src='https://placehold.co/300x200/1a202c/FDB813?text=Shikkharthira';">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="py-20 bg-gray-900">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">আমাদের <span class="gradient-text">কৃতি শিক্ষার্থীরা</span></h2>
                    <p class="text-gray-400 mt-2">যাদের সাফল্যে আমরা গর্বিত</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Testimonial 1 -->
                    <div class="bg-gray-800 p-6 rounded-xl section-glow">
                        <p class="text-gray-300 mb-4">"ইউনিক কোচিং সেন্টারের গাইডলাইন আমার সাফল্যের পেছনে অনেক বড় ভূমিকা রেখেছে। এখানকার শিক্ষকরা খুবই আন্তরিক।"</p>
                        <div class="flex items-center">
                            <img class="w-12 h-12 rounded-full mr-4 border-2 border-yellow-400" src="https://placehold.co/48x48/374151/FFFFFF?text=S" alt="Student photo">
                            <div>
                                <p class="font-bold text-white">[শিক্ষার্থীর নাম]</p>
                                <p class="text-sm text-gray-400">[তার শ্রেণী ও ফলাফল]</p>
                            </div>
                        </div>
                    </div>
                    <!-- Testimonial 2 -->
                    <div class="bg-gray-800 p-6 rounded-xl section-glow">
                        <p class="text-gray-300 mb-4">"নিয়মিত পরীক্ষা এবং শিক্ষকদের সঠিক দিকনির্দেশনা আমাকে আমার লক্ষ্যে পৌঁছাতে সাহায্য করেছে। ধন্যবাদ ইউনিক কোচিং।"</p>
                        <div class="flex items-center">
                            <img class="w-12 h-12 rounded-full mr-4 border-2 border-yellow-400" src="https://placehold.co/48x48/374151/FFFFFF?text=S" alt="Student photo">
                            <div>
                                <p class="font-bold text-white">[শিক্ষার্থীর নাম]</p>
                                <p class="text-sm text-gray-400">[তার শ্রেণী ও ফলাফল]</p>
                            </div>
                        </div>
                    </div>
                    <!-- Testimonial 3 -->
                    <div class="bg-gray-800 p-6 rounded-xl section-glow">
                        <p class="text-gray-300 mb-4">" এখানকার বন্ধুত্বপূর্ণ পরিবেশ এবং শিক্ষকদের আন্তরিকতা আমাকে পড়াশোনায় আরও বেশি মনোযোগী হতে সাহায্য করেছে।"</p>
                        <div class="flex items-center">
                            <img class="w-12 h-12 rounded-full mr-4 border-2 border-yellow-400" src="https://placehold.co/48x48/374151/FFFFFF?text=S" alt="Student photo">
                            <div>
                                <p class="font-bold text-white">[শিক্ষার্থীর নাম]</p>
                                <p class="text-sm text-gray-400">[তার শ্রেণী ও ফলাফল]</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery" class="py-20 bg-gray-800/50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">আমাদের <span class="gradient-text">ফটো গ্যালারি</span></h2>
                    <p class="text-gray-400 mt-2">কিছু স্মরণীয় মুহূর্ত</p>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <img src="https://placehold.co/600x400/1a202c/FDB813?text=Event+1" alt="Coaching event photo" class="rounded-lg section-glow transform hover:scale-105 transition duration-300">
                    <img src="https://placehold.co/600x400/1a202c/FDB813?text=Event+2" alt="Coaching event photo" class="rounded-lg section-glow transform hover:scale-105 transition duration-300">
                    <img src="https://placehold.co/600x400/1a202c/FDB813?text=Event+3" alt="Coaching event photo" class="rounded-lg section-glow transform hover:scale-105 transition duration-300">
                    <img src="https://placehold.co/600x400/1a202c/FDB813?text=Event+4" alt="Coaching event photo" class="rounded-lg section-glow transform hover:scale-105 transition duration-300">
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="py-20 bg-gray-900">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">সাধারণ <span class="gradient-text">প্রশ্নোত্তর</span></h2>
                    <p class="text-gray-400 mt-2">আপনার জিজ্ঞাসার সমাধান</p>
                </div>
                <div class="max-w-3xl mx-auto">
                    <!-- FAQ Item 1 -->
                    <div class="bg-gray-800 rounded-lg mb-4 section-glow">
                        <button class="accordion-btn w-full flex justify-between items-center p-5 font-semibold text-left text-white">
                            <span>ভর্তি প্রক্রিয়া কিভাবে সম্পন্ন করতে হয়?</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="accordion-content hidden p-5 border-t border-gray-700">
                            <p class="text-gray-400">
                                আপনি আমাদের ওয়েবসাইটে দেওয়া "ভর্তি চলছে" বাটনে ক্লিক করে অনলাইনে ফর্ম পূরণ করতে পারেন। ফর্মটি সফলভাবে সাবমিট করার পর প্রাপ্ত রসিদটি নিয়ে অফিসে যোগাযোগ করে আপনার ভর্তি নিশ্চিত করতে হবে।
                            </p>
                        </div>
                    </div>
                    <!-- FAQ Item 2 -->
                    <div class="bg-gray-800 rounded-lg mb-4 section-glow">
                        <button class="accordion-btn w-full flex justify-between items-center p-5 font-semibold text-left text-white">
                            <span>মাসিক ফি পরিশোধের নিয়ম কি?</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="accordion-content hidden p-5 border-t border-gray-700">
                            <p class="text-gray-400">
                                মাসিক ফি সাধারণত মাসের প্রথম সপ্তাহের মধ্যে অফিসে এসে পরিশোধ করতে হয়। এছাড়া, মোবাইল ব্যাংকিং এর মাধ্যমেও ফি পরিশোধের ব্যবস্থা রয়েছে। বিস্তারিত জানতে অফিসে যোগাযোগ করুন।
                            </p>
                        </div>
                    </div>
                    <!-- FAQ Item 3 -->
                    <div class="bg-gray-800 rounded-lg mb-4 section-glow">
                        <button class="accordion-btn w-full flex justify-between items-center p-5 font-semibold text-left text-white">
                            <span>কোনো শিক্ষার্থী ক্লাসে অনুপস্থিত থাকলে করণীয় কি?</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="accordion-content hidden p-5 border-t border-gray-700">
                            <p class="text-gray-400">
                                কোনো শিক্ষার্থী অসুস্থতা বা অন্য কোনো জরুরি কারণে ক্লাসে অনুপস্থিত থাকলে, অভিভাবককে অবশ্যই কোচিং কর্তৃপক্ষকে জানাতে হবে। অনুপস্থিত ক্লাসের জন্য বিশেষ অতিরিক্ত ক্লাসের ব্যবস্থা করা হয়।
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Location Section -->
        <section id="location" class="py-20 bg-gray-800/50">
            <div class="container mx-auto px-6">
                 <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">আমাদের <span class="gradient-text">অবস্থান</span></h2>
                    <p class="text-gray-400 mt-2">আমাদের খুঁজে পেতে গুগল ম্যাপ ব্যবহার করুন</p>
                </div>
                <div class="w-full h-96 rounded-lg overflow-hidden section-glow">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d118147.9948488337!2d90.35471994999999!3d23.75086395!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3755b8b087026b81%3A0x8fa563bbdd5904c2!2sDhaka!5e0!3m2!1sen!2sbd!4v1662462725581!5m2!1sen!2sbd" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer Section -->
    <footer id="contact" class="bg-gray-900 border-t border-gray-700 mt-20">
        <div class="container mx-auto px-6 py-10">
            <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left">
                <div class="mb-6 md:mb-0">
                    <h3 class="text-xl font-bold text-white">UNIQUE <span class="gradient-text">COACHING CENTRE</span></h3>
                    <p class="text-gray-400 mt-2">ইব্রাহিম শপিং সেন্টার ২য় তলা, বাংলাবাজার, সাতকানিয়া,চট্টগ্রাম</p>
                </div>
                <div class="text-gray-400">
                    <p>ইমেইল: <a href="mailto:info@unique.com" class="hover:text-yellow-400">[আপনার ইমেইল]</a></p>
                    <p>ফোন: <a href="tel:+8801XXXXXXXXX" class="hover:text-yellow-400">[আপনার ফোন নম্বর]</a></p>
                </div>
            </div>
            <div class="mt-8 border-t border-gray-800 pt-6 text-center text-gray-500">
                <p>&copy; ২০২৫ | UNIQUE COACHING CENTRE | সকল স্বত্ব সংরক্ষিত।</p>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Courses Modal -->
    <div id="courses-modal" class="modal fixed inset-0 bg-black bg-opacity-70 z-50 hidden flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="modal-content bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col p-6 transform scale-95">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <div class="text-center mb-8 flex-shrink-0">
                <h2 class="text-3xl md:text-4xl font-bold text-white">আমাদের <span class="gradient-text">কোর্সসমূহ</span></h2>
                <p class="text-gray-400 mt-2">আপনার প্রয়োজন অনুযায়ী কোর্স বেছে নিন</p>
            </div>
            <div id="courses-display" class="overflow-y-auto">
                <!-- Courses will be populated by JS -->
            </div>
        </div>
    </div>
    <!-- Teachers Modal -->
    <div id="teachers-modal" class="modal fixed inset-0 bg-black bg-opacity-70 z-50 hidden flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="modal-content bg-gray-800 rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col p-6 transform scale-95">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <div class="text-center mb-12 flex-shrink-0">
                <h2 class="text-3xl md:text-4xl font-bold text-white">আমাদের অভিজ্ঞ <span class="gradient-text">শিক্ষকবৃন্দ</span></h2>
                <p class="text-gray-400 mt-2">যাদের হাত ধরে শিক্ষার্থীরা পৌঁছে যায় সাফল্যের শীর্ষে</p>
            </div>
            <div id="teachers-display" class="overflow-y-auto">
                <!-- Teachers will be populated by JS -->
            </div>
        </div>
    </div>
    
    <!-- Routine Modal -->
    <div id="routine-modal" class="modal fixed inset-0 bg-black bg-opacity-70 z-[60] hidden flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="modal-content bg-gray-800 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col p-6 transform scale-95">
            <div class="flex-shrink-0">
                <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
                <div class="text-center mb-4">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">ক্লাস <span class="gradient-text">রুটিন</span></h2>
                    <p class="text-gray-400 mt-2">আপনার কারিকুলাম ও শ্রেণী অনুযায়ী রুটিন দেখুন</p>
                </div>
                <div id="routine-curriculum-tabs" class="flex justify-center mb-4 border-b border-gray-700 font-bold">
                    <!-- Curriculum tabs will be populated by JS -->
                </div>
                <div id="routine-class-tabs-container" class="flex flex-wrap justify-center gap-2 mb-6">
                    <!-- Class tabs will be populated by JS -->
                </div>
            </div>
            <div id="routine-display" class="overflow-y-auto flex-grow">
                <!-- Routine table/grid will be generated here by JS -->
            </div>
        </div>
    </div>

    <!-- Suggestions Modal -->
    <div id="suggestions-modal" class="modal fixed inset-0 bg-black bg-opacity-70 z-[60] hidden flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="modal-content bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col p-6 transform scale-95">
             <div class="flex-shrink-0">
                <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
                <div class="text-center mb-4">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">গুরুত্বপূর্ণ <span class="gradient-text">সাজেশন</span></h2>
                    <p class="text-gray-400 mt-2">আপনার বিষয় অনুযায়ী সাজেশন ডাউনলোড করুন</p>
                </div>
                <div id="suggestion-curriculum-tabs" class="flex justify-center mb-4 border-b border-gray-700 font-bold">
                    <!-- Curriculum tabs will be populated by JS -->
                </div>
                <div id="suggestion-class-tabs-container" class="flex flex-wrap justify-center gap-2 mb-6">
                    <!-- Class tabs will be populated by JS -->
                </div>
            </div>
            <div id="suggestion-display" class="overflow-y-auto flex-grow">
                <!-- Suggestion links will be generated here by JS -->
            </div>
        </div>
    </div>

    <!-- Admission Form Modal -->
    <div id="admission-modal" class="modal fixed inset-0 bg-black bg-opacity-70 z-50 hidden flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="modal-content bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-full overflow-y-auto p-8 transform scale-95">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold text-white">ভর্তি <span class="gradient-text">ফর্ম</span></h2>
                <p class="text-gray-400 mt-2">আপনার তথ্য দিয়ে ফর্মটি পূরণ করুন</p>
            </div>
            <form id="admission-form" novalidate>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input class="form-input bg-gray-700 border border-gray-600 rounded-lg p-3 text-white w-full focus:outline-none" type="text" name="StudentName" placeholder="শিক্ষার্থীর নাম" required>
                    <input class="form-input bg-gray-700 border border-gray-600 rounded-lg p-3 text-white w-full focus:outline-none" type="text" name="GuardianName" placeholder="অভিভাবকের নাম" required>
                    
                    <div class="form-input flex items-center bg-gray-700 border border-gray-600 rounded-lg w-full">
                        <span class="text-gray-400 pl-3">+880</span>
                        <input class="bg-transparent p-3 text-white w-full focus:outline-none" type="tel" name="student_mobile_10_digit" placeholder="1xxxxxxxxx" required maxlength="10" pattern="\d{10}">
                    </div>
                    <div class="form-input flex items-center bg-gray-700 border border-gray-600 rounded-lg w-full">
                        <span class="text-gray-400 pl-3">+880</span>
                        <input class="bg-transparent p-3 text-white w-full focus:outline-none" type="tel" name="guardian_mobile_10_digit" placeholder="1xxxxxxxxx" required maxlength="10" pattern="\d{10}">
                    </div>
                    
                    <select id="curriculum-select" name="Curriculum" class="form-input bg-gray-700 border border-gray-600 rounded-lg p-3 text-white w-full focus:outline-none" required>
                        <option value="">-- কারিকুলাম নির্বাচন করুন --</option>
                        <option value="School">স্কুল</option>
                        <option value="Madrasha">মাদ্রাসা</option>
                    </select>
                    <select id="class-select" name="Class" class="form-input bg-gray-700 border border-gray-600 rounded-lg p-3 text-white w-full focus:outline-none" required>
                        <option value="">-- ক্লাস নির্বাচন করুন --</option>
                    </select>
                </div>
                <div class="mt-4">
                    <label class="text-gray-400">বিষয়সমূহ নির্বাচন করুন:</label>
                    <div id="subject-checkboxes-container" class="mt-2 grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto bg-gray-900/50 p-2 rounded-lg">
                        <!-- Subject checkboxes will be populated here -->
                    </div>
                </div>
                <input type="hidden" name="StudentMobile">
                <input type="hidden" name="GuardianMobile">
                <input type="hidden" name="Subject">
                <input type="hidden" name="Username">
                <input type="hidden" name="Password">
                <div class="mt-6 text-center">
                    <p id="admission-fee-display" class="text-lg text-yellow-400"></p>
                    <div id="monthly-fee-display" class="text-xl text-white font-bold mt-2 h-8"></div>
                </div>
                <div class="mt-4">
                    <p class="text-xs text-center text-gray-400">*** বিঃ দ্রঃ ফর্ম সাবমিট করার পর রসিদটি প্রিন্ট অথবা ডাউনলোড করে সংরক্ষণ করুন। ***</p>
                </div>
                <div class="mt-6">
                    <button type="submit" id="submit-btn" class="w-full bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-3 px-4 rounded-lg transition duration-300">ফর্ম সাবমিট করুন</button>
                </div>
                <div id="form-status" class="mt-4 text-center h-6"></div>
            </form>
        </div>
    </div>
    
    <!-- Login Modal -->
    <div id="login-modal" class="modal fixed inset-0 bg-black bg-opacity-70 z-[70] hidden flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="modal-content bg-gray-800 rounded-xl shadow-2xl w-full max-w-sm p-8 transform scale-95">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold text-white"><span class="gradient-text">লগইন</span> করুন</h2>
            </div>
            <form id="login-form">
                <div class="space-y-4">
                    <input class="form-input bg-gray-700 border border-gray-600 rounded-lg p-3 text-white w-full focus:outline-none" type="text" name="username" placeholder="ইউজারনেম" required>
                    <input class="form-input bg-gray-700 border border-gray-600 rounded-lg p-3 text-white w-full focus:outline-none" type="password" name="password" placeholder="পাসওয়ার্ড" required>
                </div>
                <div class="mt-6">
                    <button type="submit" id="login-submit-btn" class="w-full bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-3 px-4 rounded-lg transition duration-300">
                        লগইন
                    </button>
                </div>
                <div id="login-status" class="mt-4 text-center h-6"></div>
            </form>
        </div>
    </div>

    <!-- Notice Modal for Protected Links -->
    <div id="notice-modal" class="modal fixed inset-0 bg-black bg-opacity-70 z-[80] hidden flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="modal-content bg-gray-800 rounded-xl shadow-2xl w-full max-w-md p-8 transform scale-95 text-center">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <i class="fas fa-exclamation-triangle text-yellow-400 text-5xl mb-4"></i>
            <h2 class="text-2xl font-bold text-white mb-2">দৃষ্টি আকর্ষণ</h2>
            <p class="text-gray-300">এই কন্টেন্টটি শুধুমাত্র আমাদের নিবন্ধিত শিক্ষার্থীদের জন্য। সম্পূর্ণ সুবিধা পেতে অনুগ্রহ করে ভর্তি হয়ে আপনার ইউজার আইডি ও পাসওয়ার্ড সংগ্রহ করুন।</p>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div id="receipt-modal" class="modal fixed inset-0 bg-black bg-opacity-70 z-[90] hidden flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="modal-content bg-gray-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col transform scale-95">
            <div class="p-6 flex-shrink-0 flex justify-between items-center">
                 <h2 class="text-2xl font-bold text-white">ভর্তি <span class="gradient-text">রসিদ</span></h2>
                 <div>
                    <button id="print-receipt-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 mr-2"><i class="fas fa-print mr-2"></i>প্রিন্ট</button>
                    <button id="download-receipt-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300"><i class="fas fa-download mr-2"></i>ডাউনলোড</button>
                 </div>
                 <button class="modal-close text-gray-400 hover:text-white text-3xl">&times;</button>
            </div>
            <div class="overflow-y-auto p-2">
                <div id="receipt-content" class="bg-white text-gray-800 p-8" style="width: 210mm; min-height: 297mm; margin: auto;">
                    <!-- Receipt content will be populated by JS -->
                </div>
            </div>
        </div>
    </div>


    <script>
        // --- Configuration ---
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwECMruCNtXhGGJiz8ZRnhXKw_Zr1zHQxuCxPD6vxx3aA91eZr1asvFElRsNoajhhK0/exec';
        // !!! QR Code chobir URL ekhane din !!!
        const QR_CODE_URL = 'https://placehold.co/96x96/cccccc/000000?text=QR+Code';
        
        // Global cache for dynamic data from Google Sheet
        let dynamicDataCache = null;
        let preventExit = false;
        
        const staticClasses = {
            School: ['Class 2', 'Class 3', 'Class 4', 'Class 5', 'Class 6', 'Class 7', 'Class 8', 'Class 9 (Science)', 'Class 9 (Arts)', 'Class 9 (Commerce)', 'Class 10 (Science)', 'Class 10 (Arts)', 'Class 10 (Commerce)', 'Class 11 (Science)', 'Class 11 (Arts)', 'Class 11 (Commerce)', 'Class 12 (Science)', 'Class 12 (Arts)', 'Class 12 (Commerce)'],
            Madrasha: ['Class 2', 'Class 3', 'Class 4', 'Class 5', 'Dakhil 6', 'Dakhil 7', 'Dakhil 8', 'Dakhil 9', 'Dakhil 10', 'Alim 1st Year', 'Alim 2nd Year']
        };

        const staticSubjects = {
            School: {
                'Class 2': ['বাংলা', 'ইংরেজি', 'গণিত'], 'Class 3': ['বাংলা', 'ইংরেজি', 'গণিত'], 'Class 4': ['বাংলা', 'ইংরেজি', 'গণিত', 'বিজ্ঞান'], 'Class 5': ['বাংলা', 'ইংরেজি', 'গণিত', 'বিজ্ঞান'], 'Class 6': ['বাংলা', 'ইংরেজি', 'গণিত', 'বিজ্ঞান'], 'Class 7': ['বাংলা', 'ইংরেজি', 'গণিত', 'বিজ্ঞান'], 'Class 8': ['বাংলা', 'ইংরেজি', 'গণিত', 'বিজ্ঞান'],
                'Class 9 (Science)': ['বাংলা', 'ইংরেজি', 'গণিত', 'ICT', 'পদার্থবিজ্ঞান', 'রসায়ন', 'উচ্চতর গণিত', 'জীববিজ্ঞান'], 'Class 9 (Arts)': ['বাংলা', 'ইংরেজি', 'গণিত', 'ICT', 'ভূগোল', 'ইতিহাস', 'পৌরনীতি'], 'Class 9 (Commerce)': ['বাংলা', 'ইংরেজি', 'গণিত', 'ICT', 'হিসাববিজ্ঞান', 'ফিন্যান্স', 'ব্যবসায় উদ্যোগ'],
                'Class 10 (Science)': ['বাংলা', 'ইংরেজি', 'গণিত', 'ICT', 'পদার্থবিজ্ঞান', 'রসায়ন', 'উচ্চতর গণিত', 'জীববিজ্ঞান'], 'Class 10 (Arts)': ['বাংলা', 'ইংরেজি', 'গণিত', 'ICT', 'ভূগোল', 'ইতিহাস', 'পৌরনীতি'], 'Class 10 (Commerce)': ['বাংলা', 'ইংরেজি', 'গণিত', 'ICT', 'হিসাববিজ্ঞান', 'ফিন্যান্স', 'ব্যবসায় উদ্যোগ'],
                'Class 11 (Science)': ['বাংলা', 'ইংরেজি', 'ICT', 'পদার্থবিজ্ঞান', 'রসায়ন', 'উচ্চতর গণিত', 'জীববিজ্ঞান'], 'Class 11 (Arts)': ['বাংলা', 'ইংরেজি', 'ICT', 'যুক্তিবিদ্যা', 'অর্থনীতি', 'সমাজবিজ্ঞান'], 'Class 11 (Commerce)': ['বাংলা', 'ইংরেজি', 'ICT', 'হিসাববিজ্ঞান', 'ব্যবস্থাপনা', 'উৎপাদন'],
                'Class 12 (Science)': ['বাংলা', 'ইংরেজি', 'ICT', 'পদার্থবিজ্ঞান', 'রসায়ন', 'উচ্চতর গণিত', 'জীববিজ্ঞান'], 'Class 12 (Arts)': ['বাংলা', 'ইংরেজি', 'ICT', 'যুক্তিবিদ্যা', 'অর্থনীতি', 'সমাজবিজ্ঞান'], 'Class 12 (Commerce)': ['বাংলা', 'ইংরেজি', 'ICT', 'হিসাববিজ্ঞান', 'ব্যবস্থাপনা', 'উৎপাদন']
            },
            Madrasha: {
                'Class 2': ['আরবি', 'কুরআন'], 'Class 3': ['আরবি', 'কুরআন'], 'Class 4': ['ফিকহ', 'আকাইদ'], 'Class 5': ['ফিকহ', 'আকাইদ'],
                'Dakhil 6': ['কুরআন', 'হাদিস', 'আরবি ১ম', 'আরবি ২য়', 'ফিকহ', 'আকাইদ', 'বাংলা', 'ইংরেজি', 'গণিত', 'বিজ্ঞান', 'আইসিটি'],
                'Dakhil 7': ['কুরআন', 'হাদিস', 'আরবি ১ম', 'আরবি ২য়', 'ফিকহ', 'আকাইদ', 'বাংলা', 'ইংরেজি', 'গণিত', 'বিজ্ঞান', 'আইসিটি'],
                'Dakhil 8': ['কুরআন', 'হাদিস', 'আরবি ১ম', 'আরবি ২য়', 'ফিকহ', 'আকাইদ', 'বাংলা', 'ইংরেজি', 'গণিত', 'বিজ্ঞান', 'আইসিটি'],
                'Dakhil 9': ['কুরআন', 'হাদিস', 'আরবি ১ম', 'আরবি ২য়', 'ফিকহ ও উসুল', 'বাংলা', 'ইংরেজি', 'গণিত', 'আইসিটি'],
                'Dakhil 10': ['কুরআন', 'হাদিস', 'আরবি ১ম', 'আরবি ২য়', 'ফিকহ ও উসুল', 'বাংলা', 'ইংরেজি', 'গণিত', 'আইসিটি'],
                'Alim 1st Year': ['কুরআন', 'হাদিস', 'আরবি', 'ফিকহ', 'বাংলা', 'ইংরেজি', 'আইসিটি', 'বালাগাত ও মানতিক'],
                'Alim 2nd Year': ['কুরআন', 'হাদিস', 'আরবি', 'ফিকহ', 'বাংলা', 'ইংরেজি', 'আইসিটি', 'বালাগাত ও মানতিক']
            }
        };

        // --- Helper Functions ---
        function openModal(modal) {
            document.body.style.overflow = 'hidden';
            modal.classList.remove('hidden', 'pointer-events-none');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('.modal-content').classList.remove('scale-95');
            }, 10);
        }

        function closeModal(modal) {
            document.body.style.overflow = 'auto';
            modal.classList.add('opacity-0');
            modal.querySelector('.modal-content').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('hidden', 'pointer-events-none');
            }, 300);
        }
        
        function convertGoogleDriveLink(url) {
            if (url && url.includes('drive.google.com/file/d/')) {
                const fileId = url.split('/d/')[1].split('/')[0];
                return `https://drive.google.com/uc?export=view&id=${fileId}`;
            }
            return url;
        }

        // --- UI Update Functions ---
        function updateUIAfterLogin(studentName) {
            const authSection = document.getElementById('auth-section');
            const mobileAuthSection = document.getElementById('mobile-auth-section');
            const welcomeMsg = `স্বাগতম, ${studentName.split(' ')[0]}`;
            const logoutBtnHTML = `<a href="javascript:void(0)" id="logout-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300">লগআউট</a>`;
            
            authSection.innerHTML = `<span class="mr-4">${welcomeMsg}</span> ${logoutBtnHTML}`;
            mobileAuthSection.innerHTML = `<span class="block text-center py-2">${welcomeMsg}</span> <a href="javascript:void(0)" id="mobile-logout-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 w-full block text-center">লগআউট</a>`;
            
            document.getElementById('logout-btn').addEventListener('click', logoutUser);
            document.getElementById('mobile-logout-btn').addEventListener('click', logoutUser);
        }

        function updateUIAfterLogout() {
            const authSection = document.getElementById('auth-section');
            const mobileAuthSection = document.getElementById('mobile-auth-section');
            const loginBtnHTML = `<a href="javascript:void(0)" data-modal-target="login-modal" id="login-btn" class="modal-trigger bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 px-4 rounded-lg transition duration-300">লগইন</a>`;
            const mobileLoginBtnHTML = `<a href="javascript:void(0)" data-modal-target="login-modal" id="mobile-login-btn" class="modal-trigger bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 px-4 rounded-lg transition duration-300 w-full block text-center">লগইন</a>`;

            authSection.innerHTML = loginBtnHTML;
            mobileAuthSection.innerHTML = mobileLoginBtnHTML;

            document.querySelectorAll('.modal-trigger').forEach(addModalTriggerListener);
        }

        // --- Authentication Logic ---
        function checkLoginStatus() {
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            if (loggedInUser) {
                const userData = JSON.parse(loggedInUser);
                updateUIAfterLogin(userData.studentName);
            }
        }

        function logoutUser() {
            sessionStorage.removeItem('loggedInUser');
            updateUIAfterLogout();
        }

        async function handleLogin(event) {
            event.preventDefault();
            const loginForm = event.target;
            const username = loginForm.username.value.trim();
            const password = loginForm.password.value.trim();
            const loginStatus = document.getElementById('login-status');
            const submitBtn = document.getElementById('login-submit-btn');

            submitBtn.disabled = true;
            submitBtn.textContent = 'প্রসেসিং...';
            loginStatus.textContent = '';

            try {
                const response = await fetch(SCRIPT_URL + '?action=getUsers');
                const data = await response.json();

                if (data.result === 'success') {
                    const user = data.users.find(u => u.Username === username && u.Password === password);
                    if (user) {
                        if (user.Status === 'Approved') {
                            loginStatus.textContent = 'লগইন সফল হয়েছে!';
                            loginStatus.style.color = 'lightgreen';
                            sessionStorage.setItem('loggedInUser', JSON.stringify({ studentName: user.StudentName, username: user.Username }));
                            updateUIAfterLogin(user.StudentName);
                            setTimeout(() => closeModal(document.getElementById('login-modal')), 1000);
                        } else {
                            loginStatus.textContent = 'আপনার ভর্তি এখনো Approve হয়নি। অফিসে যোগাযোগ করুন।';
                            loginStatus.style.color = 'orange';
                        }
                    } else {
                        loginStatus.textContent = 'ভুল ইউজারনেম অথবা পাসওয়ার্ড।';
                        loginStatus.style.color = 'red';
                    }
                } else {
                    throw new Error('Failed to fetch user data.');
                }
            } catch (error) {
                loginStatus.textContent = 'লগইন করতে সমস্যা হচ্ছে।';
                loginStatus.style.color = 'red';
                console.error('Login Error:', error);
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'লগইন';
            }
        }

        // --- Dynamic Content (Routine, Suggestions, etc.) ---
        async function initializeDynamicContent() {
            if (dynamicDataCache) return;

            const loaderHTML = `<div class="text-center p-8"><i class="fas fa-spinner fa-spin text-4xl text-yellow-400"></i></div>`;
            document.getElementById('featured-courses-container').innerHTML = loaderHTML;

            try {
                const response = await fetch(SCRIPT_URL + '?action=getDynamicData');
                const data = await response.json();
                if (data.result !== 'success') throw new Error(data.error);
                
                dynamicDataCache = data;
                displayFeaturedCourses();
            } catch (error) {
                const errorHTML = `<p class="text-center text-red-400 mt-8">কোর্স লোড করতে সমস্যা হচ্ছে।</p>`;
                document.getElementById('featured-courses-container').innerHTML = errorHTML;
                console.error('Dynamic Content Fetch Error:', error);
            }
        }

        function populateModalContent(modalId) {
            const loaderHTML = `<div class="text-center p-8"><i class="fas fa-spinner fa-spin text-4xl text-yellow-400"></i></div>`;
            const displayElement = document.getElementById(modalId.replace('-modal', '-display'));
            if (displayElement) displayElement.innerHTML = loaderHTML;

            if (!dynamicDataCache) {
                initializeDynamicContent().then(() => {
                    if(dynamicDataCache) renderContent(modalId);
                });
            } else {
                renderContent(modalId);
            }
        }
        
        function renderContent(modalId) {
             switch(modalId) {
                case 'routine-modal':
                    setupDynamicTabs('routine', displayRoutine);
                    break;
                case 'suggestions-modal':
                    setupDynamicTabs('suggestion', displaySuggestions);
                    break;
                case 'teachers-modal':
                    displayTeachers();
                    break;
                case 'courses-modal':
                    displayCourses();
                    break;
            }
        }

        function setupDynamicTabs(type, displayFunction) {
            const curriculumTabsContainer = document.getElementById(`${type}-curriculum-tabs`);
            const classTabsContainer = document.getElementById(`${type}-class-tabs-container`);
            const displayContainer = document.getElementById(`${type}-display`);

            curriculumTabsContainer.innerHTML = '';
            ['School', 'Madrasha'].forEach((curriculum, index) => {
                curriculumTabsContainer.innerHTML += `<button class="custom-tab curriculum-tab ${index === 0 ? 'active' : ''}" data-curriculum="${curriculum}">${curriculum}</button>`;
            });

            function updateClassTabs(curriculum) {
                classTabsContainer.innerHTML = '';
                const classes = staticClasses[curriculum] || [];
                classes.forEach((className, index) => {
                    const tab = document.createElement('button');
                    tab.className = `class-tab ${index === 0 ? 'active' : ''}`;
                    tab.textContent = className;
                    tab.dataset.class = className;
                    classTabsContainer.appendChild(tab);
                });
                if (classes.length > 0) {
                    displayFunction(curriculum, classes[0]);
                } else {
                    displayContainer.innerHTML = `<p class="text-center text-gray-400 mt-8">এই কারিকুলামের জন্য কোনো ক্লাস নেই।</p>`;
                }
            }

            curriculumTabsContainer.addEventListener('click', (e) => {
                if (e.target.matches('.curriculum-tab')) {
                    curriculumTabsContainer.querySelector('.active').classList.remove('active');
                    e.target.classList.add('active');
                    updateClassTabs(e.target.dataset.curriculum);
                }
            });

            classTabsContainer.addEventListener('click', (e) => {
                if (e.target.matches('.class-tab')) {
                    classTabsContainer.querySelector('.active')?.classList.remove('active');
                    e.target.classList.add('active');
                    const selectedCurriculum = curriculumTabsContainer.querySelector('.active').dataset.curriculum;
                    displayFunction(selectedCurriculum, e.target.dataset.class);
                }
            });
            
            updateClassTabs('School');
        }

        function displayRoutine(curriculum, className) {
            const routineDisplay = document.getElementById('routine-display');
            const classRoutine = dynamicDataCache?.routine?.[curriculum]?.[className];
            if (!classRoutine) {
                routineDisplay.innerHTML = `<p class="text-center text-gray-400 mt-8">এই শ্রেণীর জন্য এখনো রুটিন যোগ করা হয়নি।</p>`;
                return;
            }
            const days = ['শনিবার', 'রবিবার', 'সোমবার', 'মঙ্গলবার', 'বুধবার', 'বৃহস্পতিবার'];
            let routineHTML = '<div class="space-y-4">';
            days.forEach(day => {
                const dayClasses = classRoutine[day] || [];
                routineHTML += `<div class="grid grid-cols-12 gap-4 items-center"><div class="col-span-3 md:col-span-2 text-yellow-400 font-bold text-center">${day}</div><div class="col-span-9 md:col-span-10 bg-gray-900/50 rounded-lg p-3 grid grid-cols-1 md:grid-cols-3 gap-3">`;
                if (dayClasses.length > 0) {
                    dayClasses.forEach(cls => {
                        routineHTML += `<div class="bg-gray-700 p-2 rounded text-center"><p class="font-semibold">${cls.subject}</p><p class="text-sm text-gray-400">${cls.time}</p></div>`;
                    });
                } else {
                    routineHTML += `<div class="text-gray-500 text-center col-span-1 md:col-span-3">কোনো ক্লাস নেই</div>`;
                }
                routineHTML += `</div></div>`;
            });
            routineHTML += '</div>';
            routineDisplay.innerHTML = routineHTML;
        }

        function displaySuggestions(curriculum, className) {
            const suggestionDisplay = document.getElementById('suggestion-display');
            const subjectsForClass = staticSubjects[curriculum]?.[className];
            if (!subjectsForClass) {
                suggestionDisplay.innerHTML = `<p class="text-center text-gray-400 mt-8">এই শ্রেণীর জন্য কোনো বিষয় তালিকাভুক্ত নেই।</p>`;
                return;
            }
            
            let subjectsHTML = '<div class="grid grid-cols-2 md:grid-cols-4 gap-4">';
            subjectsForClass.forEach(subject => {
                const link = dynamicDataCache?.suggestions?.[curriculum]?.[className]?.[subject];
                if (link && link.trim() !== '#' && link.trim() !== '') {
                    subjectsHTML += `<a href="${link}" target="_blank" class="bg-gray-700 hover:bg-yellow-500 hover:text-gray-900 transition-all duration-300 font-bold text-center p-4 rounded-lg">${subject}</a>`;
                } else {
                    subjectsHTML += `<div class="bg-gray-800 text-gray-500 cursor-not-allowed font-bold text-center p-4 rounded-lg opacity-50">${subject}</div>`;
                }
            });
            subjectsHTML += '</div>';
            suggestionDisplay.innerHTML = subjectsHTML;
        }

        function displayTeachers() {
            const teachersDisplay = document.getElementById('teachers-display');
            const teachers = dynamicDataCache?.teachers;
            if (!teachers || teachers.length === 0) {
                teachersDisplay.innerHTML = `<p class="text-center text-gray-400 mt-8">এখনো কোনো শিক্ষকের তথ্য যোগ করা হয়নি।</p>`;
                return;
            }
            let teachersHTML = '<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">';
            teachers.forEach(teacher => {
                const directImageUrl = convertGoogleDriveLink(teacher.PhotoURL);
                teachersHTML += `
                    <div class="bg-gray-900 rounded-xl p-6 text-center section-glow">
                        <img class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-yellow-400 object-cover" src="${directImageUrl}" alt="${teacher.Name}" onerror="this.onerror=null;this.src='https://placehold.co/128x128/374151/FFFFFF?text=Image';">
                        <h3 class="text-xl font-bold text-white">${teacher.Name}</h3>
                        <p class="text-yellow-400">${teacher.Qualification}</p>
                    </div>
                `;
            });
            teachersHTML += '</div>';
            teachersDisplay.innerHTML = teachersHTML;
        }

        function displayCourses() {
            const coursesDisplay = document.getElementById('courses-display');
            const courses = dynamicDataCache?.courses;
            if (!courses || courses.length === 0) {
                coursesDisplay.innerHTML = `<p class="text-center text-gray-400 mt-8">এখনো কোনো কোর্সের তথ্য যোগ করা হয়নি।</p>`;
                return;
            }
            let coursesHTML = '<div class="space-y-4">';
            courses.forEach(course => {
                coursesHTML += `
                    <div class="bg-gray-900 rounded-lg section-glow">
                        <button class="accordion-btn w-full flex justify-between items-center p-5 font-semibold text-left text-white text-xl" data-course-name="${course.CourseName}">
                            <span>${course.CourseName}</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="accordion-content hidden p-5 border-t border-gray-700">
                            <p class="text-gray-400 mb-4">${course.Details}</p>
                            <h4 class="font-bold text-yellow-400 mb-2">এই কোর্সের বিষয়সমূহ:</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                ${course.Subjects.map(subject => `<span class="bg-gray-700 text-center text-sm rounded-full px-3 py-1">${subject}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `;
            });
            coursesHTML += '</div>';
            coursesDisplay.innerHTML = coursesHTML;
            coursesDisplay.querySelectorAll('.accordion-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const content = btn.nextElementSibling;
                    const icon = btn.querySelector('i');
                    content.classList.toggle('hidden');
                    if(icon) {
                        icon.classList.toggle('fa-chevron-down');
                        icon.classList.toggle('fa-chevron-up');
                    }
                });
            });
        }

        function displayFeaturedCourses() {
            const container = document.getElementById('featured-courses-container');
            const courses = dynamicDataCache?.courses;
            if (!courses || courses.length === 0) {
                container.innerHTML = `<p class="text-center text-gray-400 w-full">এখনো কোনো কোর্স যোগ করা হয়নি।</p>`;
                return;
            }
            let coursesHTML = '';
            courses.forEach(course => {
                coursesHTML += `
                    <div class="bg-gray-800 rounded-xl p-6 text-center w-64 flex-shrink-0 snap-center section-glow">
                        <h3 class="text-xl font-bold text-yellow-400 mb-4 h-16 flex items-center justify-center">${course.CourseName}</h3>
                        <a href="javascript:void(0)" data-modal-target="courses-modal" data-course-name="${course.CourseName}" class="modal-trigger text-white hover:text-yellow-400 font-semibold">View Details &rarr;</a>
                    </div>
                `;
            });
            container.innerHTML = coursesHTML;
            document.querySelectorAll('#featured-courses-container .modal-trigger').forEach(addModalTriggerListener);
        }

        // --- Event Listeners Setup ---
        document.addEventListener('DOMContentLoaded', () => {
            checkLoginStatus();
            initializeDynamicContent(); // Pre-load all data on page load
            document.getElementById('menu-btn').addEventListener('click', () => document.getElementById('mobile-menu').classList.toggle('hidden'));
            document.querySelectorAll('.modal-trigger').forEach(addModalTriggerListener);
            document.querySelectorAll('.modal').forEach(modal => {
                const closeBtn = modal.querySelector('.modal-close');
                if (closeBtn) closeBtn.addEventListener('click', () => closeModal(modal));
                modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(modal); });
            });
            setupAdmissionForm();
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            
            // Slider functionality
            const scrollContainer = document.getElementById('featured-courses-container');
            const scrollLeftBtn = document.getElementById('scroll-left');
            const scrollRightBtn = document.getElementById('scroll-right');
            if(scrollContainer && scrollLeftBtn && scrollRightBtn) {
                if(scrollContainer.scrollWidth > scrollContainer.clientWidth) {
                    scrollLeftBtn.classList.remove('hidden');
                    scrollRightBtn.classList.remove('hidden');
                }
                scrollLeftBtn.addEventListener('click', () => { scrollContainer.scrollBy({ left: -300, behavior: 'smooth' }); });
                scrollRightBtn.addEventListener('click', () => { scrollContainer.scrollBy({ left: 300, behavior: 'smooth' }); });
            }
        });

        function addModalTriggerListener(trigger) {
            trigger.addEventListener('click', (e) => {
                if (trigger.classList.contains('protected-link') && !sessionStorage.getItem('loggedInUser')) {
                    e.preventDefault();
                    openModal(document.getElementById('notice-modal'));
                    return;
                }
                
                const targetModalId = trigger.getAttribute('data-modal-target');
                const modal = document.getElementById(targetModalId);
                
                if (modal) {
                    openModal(modal);
                    if (dynamicDataCache) {
                        populateModalContent(targetModalId);
                        const courseNameToOpen = trigger.getAttribute('data-course-name');
                        if (courseNameToOpen) {
                            const accordionBtn = modal.querySelector(`.accordion-btn[data-course-name="${courseNameToOpen}"]`);
                            if (accordionBtn && accordionBtn.nextElementSibling.classList.contains('hidden')) {
                                accordionBtn.click();
                            }
                        }
                    }
                }
            });
        }
        
        // --- Admission Form Setup ---
        function setupAdmissionForm() {
            const form = document.getElementById('admission-form');
            const curriculumSelect = document.getElementById('curriculum-select');
            const classSelect = document.getElementById('class-select');
            const subjectCheckboxesContainer = document.getElementById('subject-checkboxes-container');
            const admissionFeeDisplay = document.getElementById('admission-fee-display');
            const feeDisplay = document.getElementById('monthly-fee-display');
            const formStatus = document.getElementById('form-status');
            const submitBtn = document.getElementById('submit-btn');

            function updateClassOptions() {
                const selectedCurriculum = curriculumSelect.value;
                classSelect.innerHTML = '<option value="">-- ক্লাস নির্বাচন করুন --</option>';
                if (selectedCurriculum && staticClasses[selectedCurriculum]) {
                    staticClasses[selectedCurriculum].forEach(className => {
                        classSelect.innerHTML += `<option value="${className}">${className}</option>`;
                    });
                }
                updateSubjectCheckboxes();
            }

            function updateSubjectCheckboxes() {
                const selectedCurriculum = curriculumSelect.value;
                const selectedClass = classSelect.value;
                subjectCheckboxesContainer.innerHTML = '';
                const allSubjectsForClass = staticSubjects[selectedCurriculum]?.[selectedClass];
                const feeData = dynamicDataCache?.fees?.[selectedCurriculum]?.[selectedClass];

                if (allSubjectsForClass) {
                    if (feeData && feeData['All Subjects']) {
                        const fee = feeData['All Subjects'];
                        subjectCheckboxesContainer.innerHTML += `
                            <label for="subject-all" class="flex items-center bg-yellow-600/20 border border-yellow-500 rounded-lg p-2 cursor-pointer hover:bg-yellow-600/30 md:col-span-3">
                                <input type="checkbox" id="subject-all" name="selectedSubjects" value="All Subjects" data-fee="${fee}" class="form-checkbox h-5 w-5 text-yellow-500 bg-gray-800 border-gray-600 rounded focus:ring-yellow-600">
                                <span class="ml-3 text-yellow-400 font-bold text-sm">সকল বিষয় (প্যাকেজ)</span>
                            </label>
                        `;
                    }

                    allSubjectsForClass.forEach(subjectName => {
                        const fee = feeData?.[subjectName] || 0;
                        const checkboxId = `subject-${subjectName.replace(/[^a-zA-Z0-9]/g, '')}`;
                        subjectCheckboxesContainer.innerHTML += `
                            <label for="${checkboxId}" class="flex items-center bg-gray-700 border border-gray-600 rounded-lg p-2 cursor-pointer hover:bg-gray-600">
                                <input type="checkbox" id="${checkboxId}" name="selectedSubjects" value="${subjectName}" data-fee="${fee}" class="form-checkbox h-5 w-5 text-yellow-500 bg-gray-800 border-gray-600 rounded focus:ring-yellow-600">
                                <span class="ml-3 text-white text-sm">${subjectName}</span>
                            </label>
                        `;
                    });
                }
                updateFee();
            }

            function updateFee() {
                let totalFee = 0;
                const checkedSubjects = subjectCheckboxesContainer.querySelectorAll('input[name="selectedSubjects"]:checked');
                const allSubjectsCheckbox = document.getElementById('subject-all');
                
                if (allSubjectsCheckbox && allSubjectsCheckbox.checked) {
                    totalFee = parseInt(allSubjectsCheckbox.dataset.fee);
                    subjectCheckboxesContainer.querySelectorAll('input:not(#subject-all)').forEach(cb => { cb.checked = false; cb.disabled = true; });
                } else {
                     subjectCheckboxesContainer.querySelectorAll('input:not(#subject-all)').forEach(cb => { cb.disabled = false; });
                    checkedSubjects.forEach(checkbox => { totalFee += parseInt(checkbox.dataset.fee); });
                }
                
                const admissionFeeData = dynamicDataCache?.fees?.['Admission Fee'];
                let admissionFee = admissionFeeData ? parseInt(admissionFeeData) : 0;

                if (admissionFee === 0 || isNaN(admissionFee)) {
                    admissionFeeDisplay.textContent = 'এককালীন ভর্তি ফি: ফ্রি!';
                    admissionFee = 0;
                } else {
                    admissionFeeDisplay.textContent = `এককালীন ভর্তি ফি: ${admissionFee} টাকা`;
                }

                if (totalFee > 0) {
                    feeDisplay.textContent = `মোট মাসিক ফি: ${totalFee} টাকা`;
                } else {
                    feeDisplay.textContent = '';
                }
            }
            
            curriculumSelect.addEventListener('change', updateClassOptions);
            classSelect.addEventListener('change', updateSubjectCheckboxes);
            subjectCheckboxesContainer.addEventListener('change', updateFee);
            
            function validateForm() {
                let isValid = true;
                formStatus.textContent = '';
                form.querySelectorAll('[required]').forEach(input => {
                    const parent = input.closest('.form-input');
                    if (parent) parent.classList.remove('invalid');
                    else input.classList.remove('invalid');

                    if (!input.value) {
                        isValid = false;
                        if(parent) parent.classList.add('invalid');
                        else input.classList.add('invalid');
                        formStatus.textContent = `অনুগ্রহ করে "${input.placeholder || input.name.replace('_10_digit', '')}" পূরণ করুন।`;
                        formStatus.style.color = 'red';
                    }
                });

                if (isValid) {
                    const studentMobile = form.querySelector('[name="student_mobile_10_digit"]');
                    const guardianMobile = form.querySelector('[name="guardian_mobile_10_digit"]');
                    if (studentMobile.value.length !== 10) {
                        isValid = false;
                        studentMobile.closest('.form-input').classList.add('invalid');
                        formStatus.textContent = 'শিক্ষার্থীর মোবাইল নম্বর ১০ সংখ্যার হতে হবে।';
                        formStatus.style.color = 'red';
                    } else if (guardianMobile.value.length !== 10) {
                        isValid = false;
                        guardianMobile.closest('.form-input').classList.add('invalid');
                        formStatus.textContent = 'অভিভাবকের মোবাইল নম্বর ১০ সংখ্যার হতে হবে।';
                        formStatus.style.color = 'red';
                    }
                }

                if (isValid && subjectCheckboxesContainer.querySelectorAll('input:checked').length === 0) {
                    isValid = false;
                    formStatus.textContent = 'অনুগ্রহ করে কমপক্ষে একটি বিষয় নির্বাচন করুন।';
                    formStatus.style.color = 'red';
                }
                return isValid;
            }

            form.addEventListener('submit', e => {
                e.preventDefault();
                if (!validateForm()) return;

                form.StudentMobile.value = '+880' + form.student_mobile_10_digit.value;
                form.GuardianMobile.value = '+880' + form.guardian_mobile_10_digit.value;

                const selectedSubjects = Array.from(subjectCheckboxesContainer.querySelectorAll('input[name="selectedSubjects"]:checked')).map(cb => cb.value);
                form.Subject.value = selectedSubjects.join(', ');

                const studentName = form.StudentName.value;
                const nameParts = studentName.split(' ').filter(n => n);
                const lastName = nameParts.length > 1 ? nameParts[nameParts.length - 1] : studentName;
                const username = lastName.toLowerCase().replace(/[^a-z]/g, '') + Math.floor(1000 + Math.random() * 9000);
                const password = 'UCC' + Math.floor(1000 + Math.random() * 9000);
                form.Username.value = username;
                form.Password.value = password;
                
                submitBtn.disabled = true;
                submitBtn.textContent = 'সাবমিট হচ্ছে...';

                fetch(SCRIPT_URL, { method: 'POST', body: new FormData(form)})
                    .then(response => response.json())
                    .then(data => {
                        if (data.result === 'success') {
                            formStatus.textContent = `ফর্ম সাবমিট হয়েছে!`;
                            formStatus.style.color = 'lightgreen';
                            
                            showReceipt(form);

                            form.reset();
                            updateClassOptions();
                            setTimeout(() => {
                                closeModal(document.getElementById('admission-modal'));
                                formStatus.textContent = '';
                            }, 1000); 
                        } else {
                            throw new Error(data.error || 'Unknown error');
                        }
                    })
                    .catch(error => {
                        formStatus.textContent = 'একটি সমস্যা হয়েছে। আবার চেষ্টা করুন।';
                        formStatus.style.color = 'red';
                        console.error('Error!', error.message);
                    })
                    .finally(() => {
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'ফর্ম সাবমিট করুন';
                    });
            });
        }

        function showReceipt(form) {
            const receiptContent = document.getElementById('receipt-content');
            const now = new Date();
            const date = `${now.getDate()} ${now.toLocaleString('en-GB', { month: 'long' })} ${now.getFullYear()}`;
            
            const studentName = form.StudentName.value;
            const studentNumber = form.StudentMobile.value;
            const guardianName = form.GuardianName.value;
            const guardianNumber = form.GuardianMobile.value;
            const className = form.Class.value;
            const subjects = form.Subject.value.split(', ');
            const username = form.Username.value;
            const password = form.Password.value;

            let totalFee = 0;
            const checkedSubjects = form.querySelectorAll('input[name="selectedSubjects"]:checked');
            const allSubjectsCheckbox = document.getElementById('subject-all');
            
            if (allSubjectsCheckbox && allSubjectsCheckbox.checked) {
                totalFee = parseInt(allSubjectsCheckbox.dataset.fee);
            } else {
                checkedSubjects.forEach(checkbox => { totalFee += parseInt(checkbox.dataset.fee); });
            }
            
            const admissionFeeData = dynamicDataCache?.fees?.['Admission Fee'];
            let admissionFee = admissionFeeData ? parseInt(admissionFeeData) : 0;
            if (isNaN(admissionFee)) admissionFee = 0;

            const totalPayable = totalFee + admissionFee;

            let subjectsHTML = '';
            subjects.forEach(sub => {
                const fee = dynamicDataCache?.fees?.[form.Curriculum.value]?.[className]?.[sub] || 'N/A';
                subjectsHTML += `<tr><td class="border p-2">${className}</td><td class="border p-2">${sub}</td><td class="border p-2 text-right">${fee}</td></tr>`;
            });

            receiptContent.innerHTML = `
                <div class="text-center mb-6">
                    <h1 class="text-3xl font-bold">UNIQUE COACHING CENTRE</h1>
                    <p class="text-sm">ইব্রাহিম শপিং সেন্টার ২য় তলা, বাংলাবাজার, সাতকানিয়া, চট্টগ্রাম</p>
                    <h2 class="text-2xl font-bold mt-4 underline">RECEIPT</h2>
                </div>
                <div class="flex justify-between mb-6 text-sm">
                    <p><strong>Date Admission:</strong> ${date}</p>
                    <p><strong>Receipt Number:</strong> _________________</p>
                </div>
                <hr class="my-4 border-gray-400">
                <h3 class="text-center font-bold mb-2">Student Information</h3>
                <hr class="my-4 border-gray-400">
                <div class="grid grid-cols-2 gap-x-8 gap-y-2 text-sm">
                    <p><strong>Student Name:</strong> ${studentName}</p>
                    <p><strong>Student Number:</strong> ${studentNumber}</p>
                    <p><strong>Guardian Name:</strong> ${guardianName}</p>
                    <p><strong>Guardian Number:</strong> ${guardianNumber}</p>
                </div>
                <div class="flex mt-4">
                    <div class="w-2/3">
                        <p class="text-sm"><strong>Website Username:</strong> <span class="font-bold text-lg">${username}</span></p>
                        <p class="text-sm"><strong>Password:</strong> <span class="font-bold text-lg">${password}</span></p>
                    </div>
                    <div class="w-1/3 flex justify-end">
                        <img src="${QR_CODE_URL}" alt="QR Code" class="w-24 h-24 object-cover">
                    </div>
                </div>
                <hr class="my-4 border-gray-400">
                <h3 class="text-center font-bold mb-2">Details & Fee</h3>
                <hr class="my-4 border-gray-400">
                <table class="w-full border-collapse border border-gray-400 text-sm">
                    <thead>
                        <tr class="bg-gray-200">
                            <th class="border p-2 text-left">Class</th>
                            <th class="border p-2 text-left">Subjects</th>
                            <th class="border p-2 text-right">Fees</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${subjectsHTML}
                        <tr><td colspan="3" class="p-1"></td></tr>
                        <tr>
                            <td colspan="2" class="border p-2 text-right font-bold">Admission Fee</td>
                            <td class="border p-2 text-right">${admissionFee === 0 ? 'Free' : admissionFee}</td>
                        </tr>
                        <tr>
                            <td colspan="2" class="border p-2 text-right font-bold">Monthly Fee</td>
                            <td class="border p-2 text-right">${totalFee}</td>
                        </tr>
                        <tr class="bg-gray-200">
                            <td colspan="2" class="border p-2 text-right font-bold text-lg">Total</td>
                            <td class="border p-2 text-right font-bold text-lg">${totalPayable}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="flex justify-between mt-20 text-sm">
                    <p class="border-t border-gray-400 pt-1">Signature</p>
                    <p class="border-t border-gray-400 pt-1">Signature</p>
                    <p class="border-t border-gray-400 pt-1">Signature</p>
                </div>
                <div class="mt-8 text-center text-xs text-red-600 font-bold">
                    <p>*** বিঃ দ্রঃ এই রসিদটি নিয়ে বাধ্যতামূলক অফিসে যোগাযোগ করে আপনার ভর্তি নিশ্চিত করুন। ***</p>
                </div>
            `;
            preventExit = true;
            openModal(document.getElementById('receipt-modal'));
        }

        window.addEventListener('beforeunload', (event) => {
            if (preventExit) {
                event.preventDefault();
                event.returnValue = ''; // For older browsers
                preventExit = false; // Allow exit on second try
            }
        });

        document.getElementById('print-receipt-btn').addEventListener('click', () => {
            preventExit = false;
            window.print();
        });

        document.getElementById('download-receipt-btn').addEventListener('click', () => {
            preventExit = false;
            const { jsPDF } = window.jspdf;
            const receiptContent = document.getElementById('receipt-content');
            
            html2canvas(receiptContent, { scale: 2 }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save("UCC-Receipt.pdf");
            });
        });
    </script>

</body>
</html>
